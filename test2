local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
print("Rayfield loaded successfully")

local Window = Rayfield:CreateWindow({
    Name = "Auto Click Radius",
    LoadingTitle = "Rayfield",
    LoadingSubtitle = "by Sirius",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = nil,
        FileName = "ClickRadius"
    }
})

local Tab = Window:CreateTab("Autoclick", 4483362458)
local Section = Tab:CreateSection("Click Settings")

local player = game.Players.LocalPlayer
local camera = workspace.CurrentCamera
local vim = game:GetService("VirtualInputManager")

local radius = 15
local running = false
local drawCircle = nil

-- Draw red selection sphere around the player
local function updateCircle()
    if drawCircle then drawCircle:Remove() end
    local char = player.Character
    if not char then return end
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local adorn = Instance.new("SelectionSphere")
    adorn.Adornee = hrp
    adorn.Color3 = Color3.fromRGB(255, 0, 0)
    adorn.Transparency = 0.5
    adorn.Parent = hrp
    drawCircle = adorn
end

-- Click children inside Visual.Debris within radius
local function clickNearby()
    while running do
        local char = player.Character
        if not char then task.wait(0.5) continue end
        local hrp = char:FindFirstChild("HumanoidRootPart")
        if not hrp then task.wait(0.5) continue end

        local debrisFolder = workspace:FindFirstChild("Visual") and workspace.Visual:FindFirstChild("Debris")
        if debrisFolder then
            for _, obj in ipairs(debrisFolder:GetChildren()) do
                if obj:IsA("BasePart") and obj.Transparency < 1 then
                    local dist = (obj.Position - hrp.Position).Magnitude
                    if dist <= radius then
                        local screenPos, onScreen = camera:WorldToViewportPoint(obj.Position)
                        if onScreen then
                            vim:SendMouseButtonEvent(screenPos.X, screenPos.Y, 0, true, game, 0)
                            vim:SendMouseButtonEvent(screenPos.X, screenPos.Y, 0, false, game, 0)
                            print("Clicked:", obj.Name)
                            task.wait(0.05)
                        end
                    end
                end
            end
        end
        task.wait(0.15)
    end
end

Tab:CreateKeybind({
    Name = "Toggle Auto Click Radius",
    CurrentKeybind = "Q",
    HoldToInteract = false,
    Flag = "AutoClickRadius",
    Callback = function()
        running = not running
        if running then
            print("AutoClick started")
            updateCircle()
            task.spawn(clickNearby)
        else
            print("AutoClick stopped")
            if drawCircle then drawCircle:Remove() drawCircle = nil end
        end
    end,
})
