local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
print("Rayfield loaded successfully")

local Window = Rayfield:CreateWindow({
    Name = "Auto Click Ring",
    LoadingTitle = "Rayfield",
    LoadingSubtitle = "by Sirius",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = nil,
        FileName = "ClickRing"
    }
})

local Tab = Window:CreateTab("Autoclick", 4483362458)
local Section = Tab:CreateSection("Click Settings")

local player = game.Players.LocalPlayer
local camera = workspace.CurrentCamera
local vim = game:GetService("VirtualInputManager")

local radius = 15
local running = false
local ringAdornment = nil

-- Create a flat red ring around the player
local function drawRing()
    if ringAdornment then ringAdornment:Destroy() end
    local char = player.Character
    if not char then return end
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local ring = Instance.new("CylinderHandleAdornment")
    ring.Adornee = hrp
    ring.Parent = hrp
    ring.Radius = radius
    ring.Height = 0.05
    ring.Color3 = Color3.fromRGB(255, 0, 0)
    ring.Transparency = 0.5
    ring.ZIndex = 1
    ring.AlwaysOnTop = true
    ring.Name = "ClickRing"
    ringAdornment = ring
end

-- Simulate click on any child in workspace.Visual.Debris within radius
local function clickNearby()
    while running do
        local char = player.Character
        if not char then task.wait(0.5) continue end
        local hrp = char:FindFirstChild("HumanoidRootPart")
        if not hrp then task.wait(0.5) continue end

        local debrisFolder = workspace:FindFirstChild("Visual") and workspace.Visual:FindFirstChild("Debris")
        if debrisFolder then
            for _, obj in ipairs(debrisFolder:GetChildren()) do
                if obj:IsA("BasePart") and obj.Transparency < 1 then
                    local dist = (obj.Position - hrp.Position).Magnitude
                    if dist <= radius then
                        local screenPos, onScreen = camera:WorldToViewportPoint(obj.Position)
                        if onScreen then
                            vim:SendMouseButtonEvent(screenPos.X, screenPos.Y, 0, true, game, 0)
                            vim:SendMouseButtonEvent(screenPos.X, screenPos.Y, 0, false, game, 0)
                            print("Clicked:", obj.Name)
                            task.wait(0.05)
                        end
                    end
                end
            end
        end
        task.wait(0.15)
    end
end

Tab:CreateKeybind({
    Name = "Toggle Auto Click Ring",
    CurrentKeybind = "Q",
    HoldToInteract = false,
    Flag = "AutoClickRing",
    Callback = function()
        running = not running
        if running then
            print("AutoClick started")
            drawRing()
            task.spawn(clickNearby)
        else
            print("AutoClick stopped")
            if ringAdornment then ringAdornment:Destroy() ringAdornment = nil end
        end
    end,
})
