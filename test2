-- Function to get the object path excluding 'Ugc'
local function getObjectPath(obj)
    local path = ""
    local baseObject = game.Workspace  -- Ensure starting from Workspace

    while obj do
        -- Skip 'Ugc' in the path
        if obj.Parent and obj.Parent.Name == "Ugc" then
            obj = obj.Parent.Parent  -- Skip the 'Ugc' parent
        else
            path = obj.Name .. "/" .. path
            obj = obj.Parent
        end
    end
    
    -- Ensure 'Workspace' is included in the path
    if path:sub(1, 1) ~= "Workspace" then
        path = "Workspace/" .. path
    end

    return path
end

-- Create a GUI for displaying the object paths
local function createScrollGUI()
    local player = game.Players.LocalPlayer
    local screenGui = Instance.new("ScreenGui")
    screenGui.Parent = player.PlayerGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0.4, 0, 0.6, 0)  -- Adjust size as necessary
    frame.Position = UDim2.new(0.3, 0, 0.2, 0)  -- Adjust position as necessary
    frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    frame.BackgroundTransparency = 0.5
    frame.Parent = screenGui

    local scrollFrame = Instance.new("ScrollingFrame")
    scrollFrame.Size = UDim2.new(1, 0, 1, 0)
    scrollFrame.Position = UDim2.new(0, 0, 0, 0)
    scrollFrame.CanvasSize = UDim2.new(0, 0, 10, 0)  -- Large enough canvas for scrolling
    scrollFrame.BackgroundTransparency = 1
    scrollFrame.Parent = frame

    local UIListLayout = Instance.new("UIListLayout")
    UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    UIListLayout.Padding = UDim.new(0, 5)
    UIListLayout.Parent = scrollFrame

    return scrollFrame
end

-- Function to display object paths in the scrollable GUI
local function displayObjectPath(path, scrollFrame)
    local textBox = Instance.new("TextBox")
    textBox.Text = path
    textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    textBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    textBox.BackgroundTransparency = 0.8
    textBox.Size = UDim2.new(1, 0, 0, 30)
    textBox.TextWrapped = true
    textBox.TextScaled = true
    textBox.ClearTextOnFocus = false  -- Keep text when clicking in the box
    textBox.MultiLine = true
    textBox.Parent = scrollFrame

    -- Adjust the canvas size to allow infinite scrolling
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, scrollFrame.CanvasSize.Y.Offset + textBox.Size.Y.Offset + 5)
end

-- Listen for mouse clicks and print the object path to the scrollable GUI
local function listenForClicks(scrollFrame)
    game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
        -- Ensure the input is from the mouse and not processed by other UI
        if input.UserInputType == Enum.UserInputType.MouseButton1 and not gameProcessed then
            local mouse = game.Players.LocalPlayer:GetMouse()
            local clickedObject = mouse.Target

            if clickedObject then
                local objectPath = getObjectPath(clickedObject)
                displayObjectPath(objectPath, scrollFrame)
            end
        end
    end)
end

-- Create the GUI and start listening for clicks
local scrollFrame = createScrollGUI()
listenForClicks(scrollFrame)
